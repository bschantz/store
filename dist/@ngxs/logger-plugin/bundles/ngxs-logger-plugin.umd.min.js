!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("@angular/core"),require("@ngxs/store"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngxs/logger-plugin",["exports","@angular/core","@ngxs/store","rxjs/operators"],o):o(((t="undefined"!=typeof globalThis?globalThis:t||self).ngxs=t.ngxs||{},t.ngxs["logger-plugin"]={}),t.ng.core,t["ngxs-store"],t.rxjs.operators)}(this,(function(t,o,e,r){"use strict";var n=function(t,o){return e="0",r=o-t.toString().length,new Array(r+1).join(e)+t;var e,r};var i=function(){function t(t,o,e){this.action=t,this.store=o,this.logWriter=e}return t.prototype.dispatched=function(t){var o,r="action "+e.getActionTypeFromInstance(this.action)+" @ "+(o=new Date,n(o.getHours(),2)+":"+n(o.getMinutes(),2)+":"+n(o.getSeconds(),2)+"."+n(o.getMilliseconds(),3));this.logWriter.startGroup(r),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",t)},t.prototype.completed=function(t){this.logWriter.logGreen("next state",t),this.logWriter.endGroup()},t.prototype.errored=function(t){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",t),this.logWriter.endGroup()},t.prototype._hasPayload=function(t){return this._getNonEmptyProperties(t).length>0},t.prototype._getNonEmptyProperties=function(t){return Object.keys(t).map((function(o){return t[o]})).filter((function(t){return void 0!==t}))},t}();var s=function(){function t(t){this.options=t,this.options=this.options||{},this.logger=t.logger||console}return t.prototype.startGroup=function(t){var o=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{o.call(this.logger,t)}catch(o){console.log(t)}},t.prototype.endGroup=function(){try{this.logger.groupEnd()}catch(t){this.logger.log("—— log end ——")}},t.prototype.logGrey=function(t,o){this.log(t,"color: #9E9E9E; font-weight: bold",o)},t.prototype.logGreen=function(t,o){this.log(t,"color: #4CAF50; font-weight: bold",o)},t.prototype.logRedish=function(t,o){this.log(t,"color: #FD8182; font-weight: bold",o)},t.prototype.log=function(t,o,e){this.isIE()?this.logger.log(t,e):this.logger.log("%c "+t,o,e)},t.prototype.isIE=function(){var t="undefined"!=typeof window&&window.navigator.userAgent?window.navigator.userAgent:"",o=!1,e=t.indexOf("MSIE "),r=t.indexOf("Trident/");return(e>-1||r>-1)&&(o=!0),o},t}();var g=new o.InjectionToken("NGXS_LOGGER_PLUGIN_OPTIONS"),l=function(){function t(t,o){this._options=t,this._injector=o}return t.prototype.handle=function(t,o,n){if(this._options.disabled||!this._options.filter(o,t))return n(t,o);this._logWriter=this._logWriter||new s(this._options),this._store=this._store||this._injector.get(e.Store);var g=new i(o,this._store,this._logWriter);return g.dispatched(t),n(t,o).pipe(r.tap((function(t){g.completed(t)})),r.catchError((function(t){throw g.errored(t),t})))},t}();l.decorators=[{type:o.Injectable}],l.ctorParameters=function(){return[{type:void 0,decorators:[{type:o.Inject,args:[g]}]},{type:o.Injector}]};var p=new o.InjectionToken("LOGGER_USER_OPTIONS");function u(t){var o={logger:console,collapsed:!1,disabled:!1,filter:function(){return!0}};return Object.assign(Object.assign({},o),t)}var c=function(){function t(){}return t.forRoot=function(o){return{ngModule:t,providers:[{provide:e.NGXS_PLUGINS,useClass:l,multi:!0},{provide:p,useValue:o},{provide:g,useFactory:u,deps:[p]}]}},t}();c.decorators=[{type:o.NgModule}],t.NGXS_LOGGER_PLUGIN_OPTIONS=g,t.NgxsLoggerPlugin=l,t.NgxsLoggerPluginModule=c,t.ɵa=p,t.ɵb=u,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngxs-logger-plugin.umd.min.js.map