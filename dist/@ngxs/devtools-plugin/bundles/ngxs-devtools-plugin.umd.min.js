!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@ngxs/store"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngxs/devtools-plugin",["exports","@angular/core","@ngxs/store","rxjs/operators"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).ngxs=e.ngxs||{},e.ngxs["devtools-plugin"]={}),e.ng.core,e["ngxs-store"],e.rxjs.operators)}(this,(function(e,t,o,n){"use strict";var s=new t.InjectionToken("NGXS_DEVTOOLS_OPTIONS"),i=function(){function e(e,t){var o=this;this._options=e,this._injector=t,this.devtoolsExtension=null,this.windowObj="undefined"!=typeof window?window:{};var n=this.windowObj.__REDUX_DEVTOOLS_EXTENSION__||this.windowObj.devToolsExtension;n&&(this.devtoolsExtension=n.connect(e),this.devtoolsExtension.subscribe((function(e){return o.dispatched(e)})))}return Object.defineProperty(e.prototype,"store",{get:function(){return this._injector.get(o.Store)},enumerable:!1,configurable:!0}),e.prototype.handle=function(e,t,o){var s=this,i=this._options&&this._options.disabled;return!this.devtoolsExtension||i?o(e,t):o(e,t).pipe(n.catchError((function(o){var n=s.store.snapshot();throw s.sendToDevTools(e,t,n),o})),n.tap((function(o){s.sendToDevTools(e,t,o)})))},e.prototype.sendToDevTools=function(e,t,n){var s=o.getActionTypeFromInstance(t);"@@INIT"===s?this.devtoolsExtension.init(e):this.devtoolsExtension.send(Object.assign(Object.assign({},t),{action:null,type:s}),n)},e.prototype.dispatched=function(e){var t=this;if("DISPATCH"===e.type){if("JUMP_TO_ACTION"===e.payload.type||"JUMP_TO_STATE"===e.payload.type){var o=JSON.parse(e.state);this.store.reset(o)}else if("TOGGLE_ACTION"===e.payload.type)console.warn("Skip is not supported at this time.");else if("IMPORT_STATE"===e.payload.type){var n=e.payload.nextLiftedState,s=n.actionsById,i=n.computedStates,r=n.currentStateIndex;this.devtoolsExtension.init(i[0].state),Object.keys(s).filter((function(e){return"0"!==e})).forEach((function(e){return t.devtoolsExtension.send(s[e],i[e].state)})),this.store.reset(i[r].state)}}else if("ACTION"===e.type){var a=JSON.parse(e.payload);this.store.dispatch(a)}},e}();function r(e){return Object.assign({name:"NGXS"},e)}i.decorators=[{type:t.Injectable}],i.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[s]}]},{type:t.Injector}]};var a=new t.InjectionToken("USER_OPTIONS"),d=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:o.NGXS_PLUGINS,useClass:i,multi:!0},{provide:a,useValue:t},{provide:s,useFactory:r,deps:[a]}]}},e}();d.decorators=[{type:t.NgModule}],e.NGXS_DEVTOOLS_OPTIONS=s,e.NgxsReduxDevtoolsPlugin=i,e.NgxsReduxDevtoolsPluginModule=d,e.ɵa=r,e.ɵb=a,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngxs-devtools-plugin.umd.min.js.map